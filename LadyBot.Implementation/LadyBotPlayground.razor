@inject LadyBotMap Map
@inject LadyBotController Controller

<svg viewBox="-0.1 -0.1 @(this.Map.Width).1 @(this.Map.Height).1" style="width: auto; height: auto; max-width: 100%; max-height: 80vh">
    @for (int y = 0; y < this.Map.Height; y++)
    {
        @for (int x = 0; x < this.Map.Width; x++)
        {
            <rect x="@x" y="@y" width="1" height="1" style="stroke: black; stroke-width: 1px; opacity: 1; fill: none" vector-effect="non-scaling-stroke" />
        }
    }

    <LadyBotCharacter @ref="this.aLadyBot" />
</svg>

<LadyBotProgramListing />

<LadyBotKeyboard />

@code
{
    private LadyBotCharacter aLadyBot;

    #region Overrides of ComponentBase

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);

        if (firstRender)
        {
            this.Controller.AssignCharacter(this.aLadyBot);
        }
    }

    #endregion
}
